//Usage:
//Add the following lines to the HTML file diff_[witness1]-[witness2].html generated by collation-diff.py:
//    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
//    <script type="text/javascript" src="../js/enlac-collation-diff.js"></script>
$(document).ready(function() {

    var variantColor = "red"//"#5DBCD2" //UNIL

    $("body").css('background-color', "#5DBCD2");
    $("table").css('background-color', "white");
    $("span.v").css('background-color', "yellow");

    $("body").css("font-family", "Lucida Grande", "Cardo", "Arial Unicode MS","Galilee Unicode Gk", "New Athena Unicode", "Athena Unicode", "Palatino Linotype", "Titus Cyberbit Basic", "Vusillus Old Face", "Alphabetum", "Galatia SIL", "Code 2000", "GentiumAlt", "Gentium", "Minion Pro", "GeorgiaGreek", "Vusillus Old Face Italic", "Everson Mono", "Aristarcoj", "Porson", "Legendum", "Aisa Unicode", "Hindsight Unicode", "Caslon", "Verdana", "Tahoma");
    var originalBGColor = "";
    var originalColor = "";
    var originalSize = $("span").css("fontSize");
    var currentId = 0;
    var maxId = parseInt($('span').last()[0].id.substring(1));


    //console.log(maxId)
    document.title +=  "(" + (maxId + 1) + " rows in collation)"
    //console.log(originalSize)

    $("span.v").mouseover(function (event) {
        currentId = parseInt($(this).attr('id').substring(1)); //only keep number
                        //console.log("new currentID: " + currentId)
        $(this).attr('title', currentId);

        //originalBGColor = $(this).css('background-color');
        originalColor = $(this).css('color');
        //originalSize = $(this).css("fontSize");

        //$("#L" + currentId).css('background-color', 'red');
        //$("#R" + currentId).css('background-color', 'red');

        $("#L" + currentId).css("fontSize", parseInt(originalSize) + 4 + "px");
        $("#R" + currentId).css("fontSize", parseInt(originalSize) + 4 + "px");

        //$("#L" + currentId).css("color", 'red');
        //$("#R" + currentId).css("color", 'red');

        $("#L" + currentId).css("font-weight", "Bold");
        $("#R" + currentId).css("font-weight", "Bold");

        $("#L" + currentId).css("border", "2px solid " + variantColor);
        $("#R" + currentId).css("border", "2px solid " + variantColor);

        $("#L" + currentId).css("border-radius", "5px");
        $("#R" + currentId).css("border-radius", "5px");

    });

    $("span").click(function(event) {
    });

    $("span.v").mouseout(function(event) { //restore
        //$("#L" + currentId).css('background-color', originalBGColor);
        //$("#R" + currentId).css('background-color', originalBGColor);
        //$("#L" + currentId).css('color', originalColor);
        //$("#R" + currentId).css('color', originalColor);
        $("#L" + currentId).css('fontSize', originalSize);
        $("#R" + currentId).css('fontSize', originalSize);
        $("#L" + currentId).css("font-weight", "normal");
        $("#R" + currentId).css("font-weight", "normal");
        $("#L" + currentId).css("border", "none");
        $("#R" + currentId).css("border", "none");
    });

  $(document).keydown(function(e){
          //console.log("key down: " + e.keyCode);
          //console.log("id: " + currentId);
          e.preventDefault();
          switch (e.keyCode) {
              case 37: //left arrow
                      //console.log("left")
                      $("#L" + currentId).mouseout();
                      $("#R" + currentId).mouseout();
                      do {
                          currentId -= 1;
                      //console.log($("#L" + currentId).css('background-color'));
                      }
                      while ((currentId >= 0) && (! $("#L" + currentId).hasClass('v'))) //($("#L" + currentId).css('background-color') != 'rgb(255, 255, 0)'));
                      $("#L" + currentId).mouseover();
                      $("#R" + currentId).mouseover();
              break;
              case 39: //right arrow
                      //console.log("right")
                      $("#L" + currentId).mouseout();
                      $("#R" + currentId).mouseout();
                      do {
                      currentId += 1;
                      }
                      while ((currentId <= maxId) && (! $("#L" + currentId).hasClass('v'))) //($("#L" + currentId).css('background-color') != 'rgb(255, 255, 0)'))

                      $("#L" + currentId).mouseover();
                      $("#R" + currentId).mouseover();
              default:
                      break;
          }
  });
/*
$("body").bind('keypress', function(e) {
     if(e.keyCode==13){
     alert(e.keyCode)
     // Enter pressed... do anything here...
     }
     });*/
});
